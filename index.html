<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flipbook with Zoom & Pan</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/4.1.0/turn.min.js"></script>
  <style>
    body {
      margin: 0;
      background: #ddd;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }

    #book-wrapper {
      width: 90vw;
      height: 90vh;
      overflow: hidden;
      position: relative;
    }

    #book-container {
      width: 100%;
      height: 100%;
      transform: scale(1) translate(0px, 0px);
      transform-origin: 0 0;
      cursor: grab;
    }

    #book-container:active {
      cursor: grabbing;
    }

    #flipbook {
      width: 100%;
      height: 100%;
    }

    #flipbook .page {
      background: white;
      border: 1px solid #aaa;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      font-family: Arial, sans-serif;
    }
  </style>
</head>
<body>
  <div id="book-wrapper">
    <div id="book-container">
      <div id="flipbook">
        <div class="page">Page 1</div>
        <div class="page">Page 2</div>
        <div class="page">Page 3</div>
        <div class="page">Page 4</div>
        <div class="page">Page 5</div>
        <div class="page">Page 6</div>
      </div>
    </div>
  </div>

  <script>
    // ✅ Flipbook initialize
    $("#flipbook").turn({
      width: 800,
      height: 600,
      autoCenter: true,
      display: "double"
    });

    // ✅ Zoom + Pan variables
    let isPanning = false;
    let startX, startY;
    let currentX = 0, currentY = 0;
    let scale = 1;

    const container = document.getElementById("book-container");

    // Zoom (CTRL + scroll)
    document.addEventListener("wheel", (e) => {
      if (e.ctrlKey) {
        e.preventDefault();
        scale += e.deltaY * -0.01;
        scale = Math.min(Math.max(1, scale), 3); // zoom 100% - 300%
        container.style.transform = `scale(${scale}) translate(${currentX}px, ${currentY}px)`;
      }
    }, { passive: false });

    // Mouse down → start pan
    container.addEventListener("mousedown", (e) => {
      if (scale > 1) {
        isPanning = true;
        startX = e.clientX - currentX;
        startY = e.clientY - currentY;
      }
    });

    // Mouse move → pan
    document.addEventListener("mousemove", (e) => {
      if (isPanning) {
        currentX = e.clientX - startX;
        currentY = e.clientY - startY;
        container.style.transform = `scale(${scale}) translate(${currentX}px, ${currentY}px)`;
      }
    });

    // Mouse up → stop pan
    document.addEventListener("mouseup", () => {
      isPanning = false;
    });
  </script>
</body>
</html>
